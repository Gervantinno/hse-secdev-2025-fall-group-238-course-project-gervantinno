# P09 - SBOM & SCA Evidence

Этот каталог содержит артефакты, сгенерированные workflow `Security - SBOM & SCA`.

## Файлы

На каждый коммит создаётся свой набор файлов.

- **sbom-<commit>.json** — SBOM (Software Bill of Materials), сгенерированный с помощью Syft.
  Версия инструмента зафиксирована (не используется `latest`).
  Внутри файла есть поле `metadata.vcs_ref` с SHA коммита, чтобы можно было понять, к какому состоянию кода относится SBOM.

- **sca_report-<commit>.json** — полный отчёт SCA от Grype со списком найденных уязвимостей.

- **sca_summary-<commit>.md** — краткая сводка по уязвимостям:
  - количество по уровням (Critical, High, Medium, Low),
  - топ уязвимостей,
  - базовые рекомендации что делать дальше.

## Генерация

Артефакты автоматически генерируются при:
- push в `main`
- ручном запуске через `workflow_dispatch`

## Использование

После прогона CI:
- артефакты загружаются как GitHub Actions artifacts;
- в имени файла есть SHA коммита.

В PR обычно достаточно:
- ссылки на запуск workflow (Actions run);
- ссылки на коммит;
- упоминания файлов:
  - `sbom-<commit>.json`
  - `sca_report-<commit>.json`
  - `sca_summary-<commit>.md`

Это нужно для трассируемости.

## Что делать с найденными уязвимостями

Если в `sca_summary` есть проблемы:

1. **Critical**
   - срочно создать Issue
   - обновить зависимость или применить фикс

2. **High**
   - проверить, можно ли безопасно обновить пакет
   - если нельзя — описать план mitigation или сделать временный waiver

3. **Medium / Low**
   - добавить в бэклог
   - исправлять по мере возможности

Если уязвимость ложная — оформить waiver в `policy/waivers.yml` с обоснованием и датой пересмотра.

## Использование для отчётов (DS)

Эти файлы можно прикладывать к отчётам:
- `sbom-<commit>.json` — как доказательство состава зависимостей
- `sca_summary-<commit>.md` — как краткую сводку по безопасности

Поле `metadata.vcs_ref` внутри SBOM позволяет показать связь с конкретным коммитом.
